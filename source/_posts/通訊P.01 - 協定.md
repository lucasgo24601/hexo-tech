---
title: 通訊P.01 - 協定
date: 2020-03-01 13:00:00
categories: 通訊協定系列
comments: true
top_img: 
cover: https://i.imgur.com/ZkUVSc3.png
type: post
toc: true
toc_number: 150
copyright: true
hide:
tags: 
    - WebSocket
    - 協定
    - ITU
    - 國際電信聯盟
    - 無線通訊
    - 有線通訊
    - CCITT
    - ISO
    - 時間
    - ISO 31-1
    - 銫原子
    - IEEE
    - IEEE802
    - IEEE802.11
    - 第六代WiFi
    - WiFi
    - 能階
    - 4G
    - 5G
    - 2.4G
    - ISM
    - 頻譜
---
我們先來個破題，我們最終要探討的是WebSocket這個網路傳輸的協定，而在這過程會用到的技術都會一併討論。
首先WebSocket是一種網路傳輸協定，而什麼是協定？

# 協定：

為了要讓所有設備都能夠相互交互資料，我們必須要有一個協定，假設你要跟一個人聊天，那麼你們勢必要用同一種語言才能進行溝通，協定亦是如此，更何況網路傳輸的是一堆0和1，那麼你協定也必然要定義前8個0和1是代表什麼意思，後20個0和1是代表什麼意思，這就是網路傳輸的協定

## 制定協定的組織：

今天你要跟我溝通，我們可以建立一個協定，
你：Lucas好帥，今天天氣怎樣
我：蔡依林好美，今天很冷
我們制訂了一個協定，當你說出關鍵字Lucas好帥，就是與我對話，當我說出蔡依林好美，就是我在跟你說話，而如果你沒說Lucas好帥，我就不知道你在跟誰講話？是在跟王力宏還是馬英九講話？這就是一個簡單協定。

但是這個協定只有你和我知道，所以要讓其他人知道，我們的話語權不夠，於是制定協定的人，必須是公信力的大組織，以下舉例：

### 國際電信聯盟(ITU)：聯合國分支機構，主要負責確立國際無線電和電信的管理制度與通訊規則，主要包括下列三個委員會：
➤世界頻率註冊委員會(IFRB)
➤國際無線電委員會(CCIR)
➤國際電報電話咨詢委員會(CCITT)

這邊舉個例子，為什麼我們撥打電話時候都會有嘟聲，而長嘟聲和短嘟聲都有特別意義
為什麼當你按下撥號的1會發出一個 嘟聲，而按下2會發出另一個 嘟聲，這就是CCITT制定的

![](https://i.imgur.com/v0W50aj.png)

由表可以看出，1的嘟聲是由一個頻率 1209 和 697 Hz合成的聲音(詳細請參考傅立葉轉換篇)

而這些特別的嘟聲傳到你的電信業者的電信交換器，電信交換器經由特別的嘟聲判斷你按下的是什麼按鍵，所以電信交換器壞了，就無法通話
![](https://i.imgur.com/0X4HS4V.png)

因為電話設備是能夠撥打國外的電話，那麼台灣用的嘟聲和美國用的嘟聲不同，台灣打給美國，台灣1的嘟聲在美國對應的是8，那原本要打給女朋友的電話，結果接起電話是隔壁老王，這樣雙方就沒辦法溝通，於是才有聯合國制定統一的協定。

###### 網紅啾啾鞋嘗試過，撥打客服，客服說需要英文服務請按1，這時候啾啾鞋沒按下1，而是播放1的嘟聲，結果居然切換到英文模式，因為客服判斷是不是按下1，也是依靠聲音的頻率而定，所以這也是協定的好處。


### 國際標準組織(ISO)：目的是為了加速工業標準之國際化與單一化、促進貨品與服務的國際交換，發展全球智慧財產權、科學、技術與經濟活動的合作，最重要的包括下列規範：

➤ISO/IEC7498：定義了網際網路互相聯結的七層架構，也就是開放式系統互連模型(OSI)，這個模型後來被廣泛應用到所有的有線與無線通訊領域。
➤ISO 31-1：時間的定義 (秒)
➤ISO 216： A4 的紙是多寬和多長
➤ISO 6709： 經度、緯度、海拔 的定義和表示法

再舉個例子，時間的定義：

一秒是多久? 為什麼不能是我從台北到高雄的時間叫做1秒？很久以前一秒的定義是一天的 86000/1 ，也就是一天 = 24小時 = 1440 分鐘 = 860000秒，那麼一秒是基於一天而定義出來，那一天是什麼?

一天是當太陽第一次上升到最高點時後，之後第二次升到最高點的時間差，~~說人話就是今天中午到明天中午的時間差~~，這就叫做真太陽時，但是隨著科技進步，發現地球是橢圓的，導致地球公轉時每個真太陽時都不是固定的，於是科學家觀察把一個周期內的所有真太陽時加起來取平均，這叫做平太陽時，一天就是平太陽時

![](https://i.imgur.com/1FnDcg9.png)

又經過一段時間，科技進步，科學家發現因為地球的地軸會輕微的改變，導致每次計算的平太陽時都不相同

![](https://i.imgur.com/ACmMq2N.png)

其根本問題是太陽為非穩定的觀測對象，於是科學家們修改秒的定義，從宏觀到微觀

![](https://i.imgur.com/0DdKqh4.png)

現在的一秒定義就是銫原子在切換能階(b和c)的頻率，銫原子要切換能階必須要一個固定的頻率，因為能階非常精小，所以頻率是非常固定的常數，我們用愛因斯坦的公式+暴力破解方法，找出銫原子的能階頻率：9192631770 Hz

這就是一秒的定義，用電路震盪9192631770次後，就是經過了一秒，用這種全新方式定義一秒，又稱為原子時，大概3億年才會誤差1秒

###### 銫原子的頻率尋找演算法，很有意思，不難，是個很好玩的演算法，真心推薦，詳情請觀看 秒的定義 篇

### 美國電子電機工程師學會(IEEE)：由於美國為科技大國，再加上網際網路起源於美國，所以IEEE是目前通訊領域最重要的組織之一，制定的通訊標準涵蓋整個有線與無線通訊領域，由於技術的進步規範的內容也愈來愈多，主要包括下列幾項：

➤IEEE802.1：內部網路與系統管理。
➤IEEE802.2：邏輯連結控制(LLC：Logical Link Control)。
➤IEEE802.3：載波偵測多重存取／碰撞偵測(CSMA/CD)，應用在乙太網路。
➤IEEE802.4：記號匯流排網路(Token bus)。
➤IEEE802.5：記號環網路(Token ring)。
➤IEEE802.6：都會區域網路(MAN：Metropolitan Area Network)。
➤IEEE802.7：寬頻網路技術(Broadband network)。
➤IEEE802.8：光纖光纜技術(Fiber network) 。
➤IEEE802.9：語音與資料整合通信(VoIP：Voice over IP)，應用在網路電話。
➤IEEE802.10：網路安全技術(Network security)。
➤IEEE802.11：無線區域網路(WLAN：Wireless Local Area Network)。
➤IEEE802.12：高速區域網路(High-speed Local Area Network)。
➤IEEE802.13：高速乙太網路(High-speed Ethernet)。
➤IEEE802.14：有線電視網路(CATV：Community Antenna TV)。
➤IEEE802.15：無線個人區域網路(WPAN：Wireless Personal Area Network)。
➤IEEE802.16：無線寬頻接取技術(Wireless MAN)，主要應用在WiMAX。
➤IEEE802.17：彈性封包環網路(Resilient packet ring)。

此處用802.11進行舉例，這是無線網路的協定，這個協定又細分很多種小協定

* 802.11b：在2.4G HZ的ISM頻率通道上，最快11Mbit/s
* 802.11a：在5G HZ的頻率通道上，最快54Mbit/s
* 802.11g：在2.4G HZ的ISM頻率通道上，最快54Mbit/s
* 802.11n：可在2.4G 、 5G  HZ頻率通道上，最快為216.7MBit/s和450Mbit/s
* 802.11ac：在5G HZ的頻率通道上，最快為 1.7Gbit/s
* 802.11ax：可在2.4G 、 5G  HZ頻率通道上，最快為2.4 Gbit/s

這些小協定又稱為第N代Wifi世代，該小協定制定了Wifi使用的頻率通道，並且也制定了使用技術，帶寬等等是多少，也就是說Wifi能多快，除了硬體設備影響，其中最核心的影響還是協定

為什麼要制定這些小協定?

![](https://i.imgur.com/LkDwDwC.png)

首先頻率通道是非常珍貴的，所有無線訊號都必須依靠頻道才能傳送，假設4G(第四代行動通訊)使用了3G Hz的頻道，那麼這個頻道就不允許其他人使用，如果各國自己訂自己的頻率那就會有很嚴重的問題

今天美國做的IPhone，他的網卡只能接收2.4G Hz，而這個頻率剛好是美國Wifi的上網頻道，那麼如果他去台灣發現，台灣上網頻道是8.7G Hz，那麼IPhone就沒辦法上網了，就算裝上台灣SIM卡也無法上網，因為它接收不到台灣上網頻道，所以這就是為什麼要制定全世界都必須遵守的協定

###### 因為頻道無法重複利用，協定定義了5G(第五代行動通訊) 可以使用的頻道，而台灣NCC將5G可以使用的頻段切分出來，讓各個電信業者進行獨佔，其中5G熱門的頻段 3500MHz 競標到天價456.75億元(中華電信就是有錢)，由此可以看出頻段的珍貴

###### 買手機時也應該看手機能接收的頻段，如果手機能接收2.412M Hz，但是你申辦的是亞太，他提供的上網頻段沒有2.412M Hz，你手機就無法上網

![](https://i.imgur.com/nhmxTx2.png)


![](https://i.imgur.com/g4OsPEh.png)

###### 台灣的5G，目前中華電信競拍最多頻段，所以理論上5G時代，中華電信的上網品質會比較好

###### ISM是指說2.4G 頻道內，可以免費使用的頻率，不用特意申請和付費，用於科學、教育、工業等運用，也因為它是免費的，所以該頻段很容易後到干擾

###### 頻段的使用定義，雖然由IEEE制定，但某些國家還是有限制，像是802.11ax 有些頻段在大陸是禁用的，如果隨意使用某些通道，有可能被查水表，但通常製作Wifi AP的公司會禁用該通道才出口到指定國家

###### 因為5G會有很多頻譜，所以5G手機就對應了需要很多射頻、濾波元件，而在手機大小不變的狀況下要塞更多晶片，就需要台積電先進的製程和厲害的IC設計讓IC變更小



